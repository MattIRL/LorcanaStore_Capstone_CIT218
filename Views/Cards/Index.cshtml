@model PaginatedList<LorcanaCardCollector.Models.Cards>

@{
    ViewData["Title"] = "Cards";
}
<h1 class="freckle-font" style="color: #d5b88b; opacity: 0.9;">Cards</h1>

<div class="rounded shadow-sm p-2" style="background: #d5b88b;">

<p>
    <a asp-action="Create" class="m-sm-2 btn btn-primary rounded-2">Add Card</a>
</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>
                
            </th>
            <th>
                @Html.DisplayNameFor(model => model[0].CardName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model[0].GemColor)
            </th>
            <th>
                @Html.DisplayNameFor(model => model[0].SetName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model[0].Franchise)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model) {
                <tr>
                    <td>
                        <img src=@item.Image_URL
                             onclick="openImageOverlay('@item.Image_URL')"
                             style="height:150px; cursor:pointer; border-radius: .5rem;" />
                    </td>
                    <td class="h5">
                        @Html.DisplayFor(modelItem => item.CardName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.GemColor)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.SetName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Franchise)
                    </td>
                    <td>
                        <a asp-action="Details" class="btn btn-secondary me-sm-2 text-light" asp-route-id="@item.CardId">Details</a>
                    </td>
                </tr>

}
        </tbody>
    </table>
    @{
        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
    }
    <a asp-action="Index"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex - 1)"
       asp-route-currentFilter="@ViewData["CurrentFilter"]"
       class="btn btn-default @prevDisabled">
        <i class="fa fa-arrow-left" aria-hidden="true"></i>
    </a>

    <span>Page @Model.PageIndex</span>
    <a asp-action="Index"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex + 1)"
       asp-route-currentFilter="@ViewData["CurrentFilter"]"
       class="btn btn-default @nextDisabled">
        <i class="fa fa-arrow-right" aria-hidden="true"></i>
    </a>
    <div id="imageOverlay" class="overlay" onclick="closeImageOverlay()">
        <span class="close-btn" onclick="closeImageOverlay(event)"><i class="fa-solid fa-xmark"></i></span>
        <img id="overlayImg" class="overlay-content" style="border-radius: 2.5rem;" />
    </div>
    <script>
        function openImageOverlay(url) {
            document.getElementById("overlayImg").src = url;
            document.getElementById("imageOverlay").style.display = "flex";
        }

        function closeImageOverlay(event) {
            // prevent closing when clicking the image itself
            if (event && event.target.id === "overlayImg") return;
            document.getElementById("imageOverlay").style.display = "none";
        }
    </script>
</div>
